<!DOCTYPE html>
<html>
<head>
  <!--Stylesheets-------------------------------------------------------------->
  <link rel="stylesheet" href="css/Task.css" type="text/css">
</head>

<body>
  <!--JS Libraries------------------------------------------------------------->
  <script type="text/javascript" src="jslib/jquery-3.2.1.js"></script>
  <script type="text/javascript" src="jslib/math.js"></script>
  <script type="text/javascript" src="jslib/images.js"></script>

  <!--JS Functions------------------------------------------------------------->
  <script type="text/javascript" src="jsfunc/Common.js"></script>
  <script type="text/javascript" src="jsfunc/RunTrial.js"></script>
  <script type="text/javascript" src="jsfunc/Presentation.js"></script>
  <script type="text/javascript" src="jsfunc/TrialMatrix.js"></script>

  <!--Inline JS Run------------------------------------------------------------>
  <script type="text/javascript">


  $(document).ready(function(){
    $("#form").hide();
    c = document.getElementById("myCanvas");
    ctx = c.getContext("2d");
    myCanvas = document.getElementById("myCanvas");
    //document.getElementById("myCanvas").style.cursor = "none";

    //#######################################################//
    //-------------GLOBAL EXPERIMENT PARAMETERS--------------//
    //#######################################################//

    //------------------------TIMINGS-----------------------//
    IMAGEinterval = 6000
    ITIinterval = 4000
    ISIinterval = 500

    //---------------------TRIAL COUNTS--------------------//
    totallength = 136;

    //#######################################################//
    //-------------Starting HTML and JS Funct----------------//
    //#######################################################//

    //Start stuff
    $("#info").hide();
    $("#form").hide();
    $('#button').hide();
    $("#mturk_form").hide();
    d1 = new Date();
    runStart = d1.getTime();

    //hide buttons
    $("#Granite").hide();
    $("#Obsidian").hide();
    $("#Pegmatite").hide();
    $("#Pumice").hide();
    $("#Amphibolite").hide();
    $("#Gneiss").hide();
    $("#Marble").hide();
    $("#Slate").hide();
    $("#Breccia").hide();
    $("#Conglomerate").hide();
    $("#RockGypsum").hide();
    $("#Sandstone").hide();
    $("#Start").hide();
    $("#Start2").hide();
    $("#Start3").hide();
    $("#Start4").hide();
    $("#Start5").hide();
    $("#Example").hide();
    $("#Likert1").hide();
    $("#Likert2").hide();
    $("#Likert3").hide();
    $("#Likert4").hide();
    $("#Likert5").hide();
    $("#Likert6").hide();
    $("#Likert7").hide();
    $("#Likert8").hide();

    $("#Granite2").hide();
    $("#Obsidian2").hide();
    $("#Pegmatite2").hide();
    $("#Pumice2").hide();
    $("#Amphibolite2").hide();
    $("#Gneiss2").hide();
    $("#Marble2").hide();
    $("#Slate2").hide();
    $("#Breccia2").hide();
    $("#Conglomerate2").hide();
    $("#RockGypsum2").hide();
    $("#Sandstone2").hide();
    $("#Likert12").hide();
    $("#Likert22").hide();
    $("#Likert32").hide();
    $("#Likert42").hide();
    $("#Likert52").hide();
    $("#Likert62").hide();
    $("#Likert72").hide();
    $("#Likert82").hide();

    $("#Granite3").hide();
    $("#Obsidian3").hide();
    $("#Pegmatite3").hide();
    $("#Pumice3").hide();
    $("#Amphibolite3").hide();
    $("#Gneiss3").hide();
    $("#Marble3").hide();
    $("#Slate3").hide();
    $("#Breccia3").hide();
    $("#Conglomerate3").hide();
    $("#RockGypsum3").hide();
    $("#Sandstone3").hide();
    $("#Likert13").hide();
    $("#Likert23").hide();
    $("#Likert33").hide();
    $("#Likert43").hide();
    $("#Likert53").hide();
    $("#Likert63").hide();
    $("#Likert73").hide();
    $("#Likert83").hide();

    $("#question1").hide();
    $("#question2").hide();
    $("#question3").hide();
    $("#question4").hide();
    $("#QUESTION1").hide();
    $("#QUESTION2").hide();
    $("#QUESTION3").hide();


    //first js function to run
    surveyquestions = surveyquestions
    fileName = listimagenames
    img = new Array(fileName.length);
    imgCount = 0
    loadImage();

    //#######################################################//
    //------------------INITIALIZING VARIABLES---------------//
    //#######################################################//
    i=0;
    j=0;
    acccount = 0;
    acctotalcount = 0;
    notfullscreen = 0;
    instructionson = 0;
    block = -1;
    trialcount = 0;
    totalcount = 0;
    instructioncount = 0;
    stimscreencount = 0;
    miniblock_right = [];


    //variables that just need to be
    type = 0;
    jokes = 0;

    //logfile
    data=[['']];
    runStart;
    logCounter = 0;
    //onset;
    d1;
    checkResponse = false;
    timeoutHandle = null;
    timeoutIMAGE = null;
    timeoutITI = null;
    timeoutcountdown = null;

    //#######################################################//
    //-----------------------Button Presses------------------//
    //#######################################################//
    //Detect events likes clicks or button presses
    $("body").keypress(function(event){
      //clearTimeout();
      if (type != 4){
      key = event.keyCode || event.which
      event.preventDefault();}
    });

    //define each css click element
    $("#Granite").on('click', function(){if(stimscreencount == 0){ans=1;data[logCounter] = ["SR:", j, onset, trialmatrix_2[0][j], ans, 9999,
    1,trialmatrix_2[1][j],trialmatrix_2[2][j],trialmatrix_2[3][j]
    ];
    logCounter++;iti_screen_matchedlearning()}});
    $("#Obsidian").on('click', function(){if(stimscreencount == 0){ans=2;data[logCounter] = ["SR:", j, onset, trialmatrix_2[0][j], ans, 9999,
    1,trialmatrix_2[1][j],trialmatrix_2[2][j],trialmatrix_2[3][j]
    ];
    logCounter++;iti_screen_matchedlearning()}});
    $("#Pegmatite").on('click', function(){if(stimscreencount == 0){ans=3;data[logCounter] = ["SR:", j, onset, trialmatrix_2[0][j], ans, 9999,
    1,trialmatrix_2[1][j],trialmatrix_2[2][j],trialmatrix_2[3][j]
    ];
    logCounter++;iti_screen_matchedlearning()}});
    $("#Pumice").on('click', function(){if(stimscreencount == 0){ans=4;data[logCounter] = ["SR:", j, onset, trialmatrix_2[0][j], ans, 9999,
    1,trialmatrix_2[1][j],trialmatrix_2[2][j],trialmatrix_2[3][j]
    ];
    logCounter++;iti_screen_matchedlearning()}});
    $("#Amphibolite").on('click', function(){if(stimscreencount == 0){ans=5;data[logCounter] = ["SR:", j, onset, trialmatrix_2[0][j], ans, 9999,
    1,trialmatrix_2[1][j],trialmatrix_2[2][j],trialmatrix_2[3][j]
    ];
    logCounter++;iti_screen_matchedlearning()}});
    $("#Gneiss").on('click', function(){if(stimscreencount == 0){ans=6;data[logCounter] = ["SR:", j, onset, trialmatrix_2[0][j], ans, 9999,
    1,trialmatrix_2[1][j],trialmatrix_2[2][j],trialmatrix_2[3][j]
    ];
    logCounter++;iti_screen_matchedlearning()}});
    $("#Marble").on('click', function(){if(stimscreencount == 0){ans=7;data[logCounter] = ["SR:", j, onset, trialmatrix_2[0][j], ans, 9999,
    1,trialmatrix_2[1][j],trialmatrix_2[2][j],trialmatrix_2[3][j]
    ];
    logCounter++;iti_screen_matchedlearning()}});
    $("#Slate").on('click', function(){if(stimscreencount == 0){ans=8;data[logCounter] = ["SR:", j, onset, trialmatrix_2[0][j], ans, 9999,
    1,trialmatrix_2[1][j],trialmatrix_2[2][j],trialmatrix_2[3][j]
    ];
    logCounter++;iti_screen_matchedlearning()}});
    $("#Breccia").on('click', function(){if(stimscreencount == 0){ans=9;data[logCounter] = ["SR:", j, onset, trialmatrix_2[0][j], ans, 9999,
    1,trialmatrix_2[1][j],trialmatrix_2[2][j],trialmatrix_2[3][j]
    ];
    logCounter++;iti_screen_matchedlearning()}});
    $("#Conglomerate").on('click', function(){if(stimscreencount == 0){ans=10;data[logCounter] = ["SR:", j, onset, trialmatrix_2[0][j], ans, 9999,
    1,trialmatrix_2[1][j],trialmatrix_2[2][j],trialmatrix_2[3][j]
    ];
    logCounter++;iti_screen_matchedlearning()}});
    $("#RockGypsum").on('click', function(){if(stimscreencount == 0){ans=11;data[logCounter] = ["SR:", j, onset, trialmatrix_2[0][j], ans, 9999,
    1,trialmatrix_2[1][j],trialmatrix_2[2][j],trialmatrix_2[3][j]
    ];
    logCounter++;iti_screen_matchedlearning()}});
    $("#Sandstone").on('click', function(){if(stimscreencount == 0){ans=12;data[logCounter] = ["SR:", j, onset, trialmatrix_2[0][j], ans, 9999,
    1,trialmatrix_2[1][j],trialmatrix_2[2][j],trialmatrix_2[3][j]
    ];
    logCounter++;iti_screen_matchedlearning()}});
    $("#Granite2").on('click', function(){if(stimscreencount == 0){ans=1;data[logCounter] = ["SR2:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Obsidian2").on('click', function(){if(stimscreencount == 0){ans=2;data[logCounter] = ["SR2:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Pegmatite2").on('click', function(){if(stimscreencount == 0){ans=3;data[logCounter] = ["SR2:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Pumice2").on('click', function(){if(stimscreencount == 0){ans=4;data[logCounter] = ["SR2:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Amphibolite2").on('click', function(){if(stimscreencount == 0){ans=5;data[logCounter] = ["SR2:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Gneiss2").on('click', function(){if(stimscreencount == 0){ans=6;data[logCounter] = ["SR2:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Marble2").on('click', function(){if(stimscreencount == 0){ans=7;data[logCounter] = ["SR2:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Slate2").on('click', function(){if(stimscreencount == 0){ans=8;data[logCounter] = ["SR2:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Breccia2").on('click', function(){if(stimscreencount == 0){ans=9;data[logCounter] = ["SR2:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Conglomerate2").on('click', function(){if(stimscreencount == 0){ans=10;data[logCounter] = ["SR2:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#RockGypsum2").on('click', function(){if(stimscreencount == 0){ans=11;data[logCounter] = ["SR2:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Sandstone2").on('click', function(){if(stimscreencount == 0){ans=12;data[logCounter] = ["SR2:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Granite3").on('click', function(){if(stimscreencount == 0){ans=1;data[logCounter] = ["SR3:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Obsidian3").on('click', function(){if(stimscreencount == 0){ans=2;data[logCounter] = ["SR3:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Pegmatite3").on('click', function(){if(stimscreencount == 0){ans=3;data[logCounter] = ["SR3:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Pumice3").on('click', function(){if(stimscreencount == 0){ans=4;data[logCounter] = ["SR3:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Amphibolite3").on('click', function(){if(stimscreencount == 0){ans=5;data[logCounter] = ["SR3:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Gneiss3").on('click', function(){if(stimscreencount == 0){ans=6;data[logCounter] = ["SR3:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Marble3").on('click', function(){if(stimscreencount == 0){ans=7;data[logCounter] = ["SR3:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Slate3").on('click', function(){if(stimscreencount == 0){ans=8;data[logCounter] = ["SR3:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Breccia3").on('click', function(){if(stimscreencount == 0){ans=9;data[logCounter] = ["SR3:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Conglomerate3").on('click', function(){if(stimscreencount == 0){ans=10;data[logCounter] = ["SR3:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#RockGypsum3").on('click', function(){if(stimscreencount == 0){ans=11;data[logCounter] = ["SR3:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});
    $("#Sandstone3").on('click', function(){if(stimscreencount == 0){ans=12;data[logCounter] = ["SR3:", i, onset, trialmatrix[1][i], ans, 9999,
    trialmatrix[0][i],trialmatrix[1][i],trialmatrix[2][i],trialmatrix[3][i],
    trialmatrix[4][i]];
    logCounter++;iti_screen_nofeedback()}});

    $("#Start").on('click', function(){stimscreencount = 1; $("#Start").hide(); iti_screen_matchedlearning_nofeedback();});
    $("#Start2").on('click', function(){stimscreencount = 1; $("#Start2").hide(); iti_screen_nofeedback();});
    $("#Start3").on('click', function(){stimscreencount = 1; $("#Start3").hide(); iti_screen_nofeedback();});
    $("#Start4").on('click', function(){stimscreencount = 1; $("#Start4").hide(); iti_screen_nofeedback();});
    $("#Start5").on('click', function(){stimscreencount = 1; $("#Start5").hide(); iti_screen_nofeedback();});
          });

        </script>
      </body>
        <table>
          <tr>
            <td>
              <div class="canvas-container">
                <canvas id='myCanvas' width='900' height='900'></canvas>
                <input id="question1" name="question1" value="" type = 'text' onfocus="this.value=''" value=""></input>
                <input id="question2" name="question2" value="" type = 'text' onfocus="this.value=''" value=""></input>
                <input id="question3" name="question3" value="" type = 'text' onfocus="this.value=''" value=""></input>
                <input id="question4" name="question4" value="" type = 'text' onfocus="this.value=''" value=""></input>
                <button id='Granite'>Granite</button>
                <button id='Obsidian'>Obsidian</button>
                <button id='Pegmatite'>Pegmatite</button>
                <button id='Pumice'>Pumice</button>
                <button id='Amphibolite'>Amphibolite</button>
                <button id='Gneiss'>Gneiss</button>
                <button id='Marble'>Marble</button>
                <button id='Slate'>Slate</button>
                <button id='Breccia'>Breccia</button>
                <button id='Conglomerate'>Conglomerate</button>
                <button id='RockGypsum'>Rock Gypsum</button>
                <button id='Sandstone'>Sandstone</button>
                <button id='Granite2'>Granite</button>
                <button id='Obsidian2'>Obsidian</button>
                <button id='Pegmatite2'>Pegmatite</button>
                <button id='Pumice2'>Pumice</button>
                <button id='Amphibolite2'>Amphibolite</button>
                <button id='Gneiss2'>Gneiss</button>
                <button id='Marble2'>Marble</button>
                <button id='Slate2'>Slate</button>
                <button id='Breccia2'>Breccia</button>
                <button id='Conglomerate2'>Conglomerate</button>
                <button id='RockGypsum2'>Rock Gypsum</button>
                <button id='Sandstone2'>Sandstone</button>
                <button id='Granite3'>Granite</button>
                <button id='Obsidian3'>Obsidian</button>
                <button id='Pegmatite3'>Pegmatite</button>
                <button id='Pumice3'>Pumice</button>
                <button id='Amphibolite3'>Amphibolite</button>
                <button id='Gneiss3'>Gneiss</button>
                <button id='Marble3'>Marble</button>
                <button id='Slate3'>Slate</button>
                <button id='Breccia3'>Breccia</button>
                <button id='Conglomerate3'>Conglomerate</button>
                <button id='RockGypsum3'>Rock Gypsum</button>
                <button id='Sandstone3'>Sandstone</button>
                <button id='Start'>Begin Task</button>
                <button id='Start2'>Begin Task</button>
                <button id='Start3'>Begin Task</button>
                <button id='Start4'>Begin Task</button>
                <button id='Start5'>Begin Task</button>
                <button id='QUESTION1'>Next Question</button>
                <button id='QUESTION2'>Next Question</button>
                <button id='QUESTION3'>Next Question</button>
                <button id='Example'>See Example Rocks</button>
                <button id='Likert1'>Always Memorized</button>
                <button id='Likert2'>Usually Memorized</button>
                <button id='Likert3'>Sometimes Memorized</button>
                <button id='Likert4'>Unsure or Equally Both Strategies</button>
                <button id='Likert5'>Sometimes Established Rule</button>
                <button id='Likert6'>Usually Established Rule</button>
                <button id='Likert7'>Always Established Rule</button>
                <button id='Likert12'>Always Memorized</button>
                <button id='Likert22'>Usually Memorized</button>
                <button id='Likert32'>Sometimes Memorized</button>
                <button id='Likert42'>Unsure or Equally Both Strategies</button>
                <button id='Likert52'>Sometimes Established Rule</button>
                <button id='Likert62'>Usually Established Rule</button>
                <button id='Likert72'>Always Established Rule</button>
                <button id='Likert13'>Always Memorized</button>
                <button id='Likert23'>Usually Memorized</button>
                <button id='Likert33'>Sometimes Memorized</button>
                <button id='Likert43'>Unsure or Equally Both Strategies</button>
                <button id='Likert53'>Sometimes Established Rule</button>
                <button id='Likert63'>Usually Established Rule</button>
                <button id='Likert73'>Always Established Rule</button>
                  </div>
              <div style="text-align:center; align:center;">
              </div>
              <div style="text-align:center;">
                <button id="startButton">Start</button>
              </div>
              <form id="form" onsubmit="return false;">
                <input   style=position:absolute;top:80%;left:40%;width:10%; type="text" id="userInput">
              </form>
              <form id="mturk_form" method="POST" action="https://dibs-web01.vm.duke.edu/AMTSubmit/dataHandler.php">
                <input type="hidden" id="assignmentId" name="assignmentId" value="">
                <input type="hidden" id="workerId" name="workerId" value="">
                <input type="hidden" id="hitId" name="hitId" value="">
                <input type="hidden" id="RTs" name="RTs" value="">
                <input type="hidden" id="demographics" name="demographics" value="categorylearn3">
                <input type="hidden" id="ExpName" name="ExpName" value="categorylearn3">
              </form>
            </td>
          </tr>
        </table>
      </html>
